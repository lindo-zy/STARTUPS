STARTUPS
```txt
🎯 游戏概要：
玩家人数：3–7人
游戏时长：约20分钟
核心目标：成为6家初创公司中最多公司的最大股东，通过投资卡牌赚取金钱并获得回合胜利标记，最终累计得分最高者获胜。
🃏 游戏组件与设置：
共 45张卡牌，代表6家公司，每家公司卡牌数量不同（数字5–10表示该公司的卡牌总数）。
每位玩家起始有 3张手牌 和 10个1元标记。
随机移除5张卡牌不使用。
剩余卡牌组成中央“市场”牌库。
每家公司配有一个 反垄断标记（Anti-Monopoly Token）。
🔁 游戏流程（每回合）：
每位玩家轮流执行以下两个动作，保持手牌始终为3张：

1. 获取一张卡牌：
从市场牌库抽牌：需向市场中每张已公开的卡牌支付1元。
选择市场中已打出的卡牌：可免费拿取，并收回其上的所有1元标记。
2. 打出一张卡牌：
可选择：
投资：将卡牌放在自己面前，表示持有该公司股份。
放到市场：但不能是刚从市场拿回的同一家公司卡牌。
一旦投资，卡牌不可收回。
🛡️ 反垄断机制：
第一个投资某公司的玩家获得该公司的反垄断标记。
拥有该标记的玩家：
不能从市场拿取该公司的卡牌；
抽牌库时无需为市场中的该公司卡牌付费；
不能将该公司的卡牌打到市场上。
当其他玩家在该公司持有的卡牌数超过当前持有者时，反垄断标记转移。
📊 回合结算：
当牌库抽完，当前玩家打出卡牌后，回合结束。此时：

所有玩家手牌自动视为已投资。
对每家公司：
最大股东（持卡最多者）向其他小股东收取“3元/张”的费用。
若并列最多，则无人获得收益。
付款不足者记为负资产（影响最终排名）。
根据本轮总金钱排名：
第1名：+2分
第2名：+1分
最后一名：-1分
游戏进行若干回合（通常2–3轮），最终累计分数最高者胜出。

```

```txt
流程
1.房主创建房间，获得1号座位，生成6位数邀请码
2.玩家输入邀请码加入房间，依次获得一个座位，最多6个人加入
3.所有玩家准备后，房主开始游戏
4.房主离开则房间解散，无法重新加入(逻辑简单)
5.创建和加入房间时，需要填写自己的姓名，生成一个唯一的uuid，为jwt
```

```text
1. 用户界面（UI）
登录/加入房间界面（输入昵称、房间号）
房间等待界面（显示已加入玩家、开始按钮）
游戏主界面：
玩家区域（手牌区、已投资卡牌区、金钱、得分）
中央市场区（展示已打出到市场的卡牌，带1元标记）
牌库剩余数量提示
当前回合提示（轮到谁操作）
公司信息面板（每家公司当前最大股东、反垄断标记持有者、各玩家持股数）
操作提示与反馈（如“请选择一张卡牌”、“支付1元”等）
2. 交互逻辑（前端状态管理）
手牌始终维持3张（自动补牌逻辑需配合后端）
卡牌拖拽/点击交互（抽牌、拿市场卡、打牌）
动态高亮可操作选项（如哪些卡可打、哪些市场卡可拿）
实时更新金钱、得分、反垄断标记状态
回合结算动画（展示收钱、排名、加分）
3. 通信层
使用 WebSocket 或 HTTP 长轮询 与后端同步状态
监听游戏事件（如“新回合开始”、“某玩家打出卡牌”）
发送玩家操作（如“抽牌”、“拿市场卡X”、“打出卡Y投资”）
4. 本地状态缓存（可选）
缓存玩家昵称、最近房间号（localStorage）
```

```text
使用内存存储房间状态，适合 2–3 轮、7人以内小局。
1. 房间管理
创建/加入房间（房间ID随机生成）
玩家加入/离开处理
房主开始游戏
2. 游戏逻辑引擎
初始化游戏状态：
生成45张卡牌（按公司分配数量：如 A:5, B:6, ..., F:10）
随机移除5张
洗牌形成牌库
每位玩家发3张手牌，10元
初始化6个反垄断标记（未分配）
处理每轮玩家操作：
验证操作合法性（如不能打刚拿的同公司卡到市场）
更新手牌、金钱、投资状态
自动转移反垄断标记（当最大股东变更）
回合结束判断（牌库抽完 + 当前玩家打牌后）
结算逻辑：
自动将手牌转为投资
计算每家公司最大股东 → 收钱（3元/张）
处理负资产
按金钱排名分配回合分（+2, +1, -1）
判断是否进行下一轮（通常2–3轮，可配置）
3. 状态广播
向所有玩家广播最新游戏状态（全量或增量）
广播操作日志（“玩家A投资了公司C”）
4. API 服务
提供 HTTP 接口用于房间创建/加入
提供 WebSocket 连接用于实时通信
```